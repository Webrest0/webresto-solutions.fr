// Menu mobile
const btn = document.querySelector('.hamburger');
const nav = document.querySelector('#nav');
if (btn && nav) {
  btn.addEventListener('click', () => {
    const open = nav.hasAttribute('hidden') ? false : true;
    if (open) { nav.setAttribute('hidden', ''); btn.setAttribute('aria-expanded', 'false'); }
    else { nav.removeAttribute('hidden'); btn.setAttribute('aria-expanded', 'true'); }
  });
  // refermer au clic sur un lien
  nav.querySelectorAll('a').forEach(a => a.addEventListener('click', () => {
    nav.setAttribute('hidden',''); btn.setAttribute('aria-expanded','false');
  }));
}

// Améliore les ancres (scroll doux)
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click', e=>{
    const id=a.getAttribute('href');
    if(id.length>1){
      e.preventDefault();
      const el=document.querySelector(id);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
    }
  });
});

// Sécurité : forcer target _blank à ouvrir en noopener
document.querySelectorAll('a[target="_blank"]').forEach(a=>{
  a.rel = 'noopener';
});